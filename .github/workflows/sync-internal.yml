name: SyncRepositories

on:
  push:
    branches: ["staging"]

jobs:
  deploy:
    name: deploy
    runs-on: ubuntu-latest
    steps:
      - name: Set up Go 1.14
        uses: actions/setup-go@v1
        with:
          go-version: 1.14
        id: go
      - name: Check out code open source
        uses: actions/checkout@master
        with:
          path: open_source
      - name: Check out code internal
        uses: actions/checkout@master
        with:
          repository: ZupIT/horusec-internal
          token: ${{ secrets.SECRET_GITHUB_TOKEN }}
          path: internal
      - name: deploy
        env:
          SECRET_GITHUB_TOKEN: ${{ secrets.SECRET_GITHUB_TOKEN }}
        run: |
          ls
          echo ==========================================================================
          ls ..
          echo ==========================================================================
          ls ../..
          echo ==========================================================================
      #     BRANCH_NAME=${GITHUB_REF##*/}

      #     chmod +x ./deployments/scripts/sync-internal.sh
      #     ./deployments/scripts/sync-internal.sh "develop" "$SECRET_GITHUB_TOKEN"
      #     cd tmp-horusec-internal
      #     git status
      # - name: Commit changes
      #   uses: EndBug/add-and-commit@v4
      #   with:
      #     cwd: './tmp-horusec-internal'
      #     author_name: "Horusec"
      #     author_email: "horusec@zup.com.br"
      #     message: "[skip cicd] update versioning file"
      #     GITHUB_TOKEN: ${{ secrets.SECRET_GITHUB_TOKEN }}
